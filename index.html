<!DOCTYPE html>
<html lang="en" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Responsive Countdown Timers</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Vazirmatn&display=swap');

    body {
      font-family: 'Vazirmatn', sans-serif;
      margin: 0;
      padding: 0;
      height: 100vh;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: #fff;
      background: linear-gradient(135deg, rgba(29, 29, 29, 0.8), rgba(0, 0, 0, 0.8));
    }

    #nametitle {
      color: rgba(255, 255, 255, 0.7);
      text-align: center;
      margin-bottom: 20px;
    }

    h1 {
      font-size: 2em;
      margin: 0;
      text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.7);
      z-index: 1;
    }

    .timer-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      z-index: 1;
      width: 100%;
      max-width: 1200px;
      padding: 10px;
    }

    .timer-column {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
      flex: 1 1 100px;
      max-width: 240px;
      width: 100%; /* Adjust full width */
      box-sizing: border-box; /* Ensures padding is included in width */
    }

    .timer {
      padding: 15px;
      border-radius: 15px;
      text-align: center;
      color: white;
      width: 100%;
      backdrop-filter: blur(15px);
      background-color: rgba(254, 230, 0, 0.1);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
      overflow: hidden; /* Prevent content overflow */
    }

    .timer:hover {
      transform: translateY(-10px);
      box-shadow: 0 16px 30px rgba(0, 0, 0, 0.5);
    }

    .countdown {
      font-size: 1.2em;
    }

    .expired {
      font-size: 1.2em;
      color: red;
    }

    /* Title Colors */
    .title1 { color: #1e90ff; } /* عید */
    .title2 { color: #ffa502; } /* امتحانات */
    .title3 { color: #ff6348; } /* تابستان بعدی */
    .title4 { color: #28a745; } /* کنکور (green) */
    .title5 { color: #fffb00; } /* Next School Day */

    /* Timer Background Colors */
    .timer:nth-child(1) { background-color: rgba(106, 177, 215, 0.2); }
    .timer:nth-child(2) { background-color: rgba(255, 179, 71, 0.2); }
    .timer:nth-child(3) { background-color: rgba(66, 115, 148, 0.2); }
    .timer:nth-child(4) { background-color: rgba(60, 179, 113, 0.2); }
    .timer:nth-child(5) { background-color: rgba(30, 144, 255, 0.2); }

    canvas {
      position: absolute;
      top: 0;
      left: 0;
      z-index: 0;
    }

    @media (max-width: 768px) {
      h1 {
        font-size: 1.5em;
      }

      .timer {
        padding: 10px;
        margin-bottom: 10px;
      }

      .countdown {
        font-size: 1em;
      }

      .timer-container {
        flex-direction: column;
        align-items: center;
      }
    }

    @media (max-width: 480px) {
      h1 {
        font-size: 1.2em;
      }

      .timer {
        padding: 8px;
      }

      .countdown {
        font-size: 0.9em;
      }

      .timer-container {
        padding: 0;
        gap: 5px;
      }
    }
  </style>
</head>
<body>

<h1 id="nametitle">شمارش معکوس رویدادها</h1>
<div class="timer-container">
  <div class="timer-column">
    <h2 class="title1">عید</h2>
    <div class="timer">
      <div class="countdown" id="countdown2"></div>
    </div>
    <div class="timer">
      <div class="countdown" id="countdown2_sec"></div>
    </div>
  </div>
  <div class="timer-column">
    <h2 class="title2">امتحانات</h2>
    <div class="timer">
      <div class="countdown" id="countdown4"></div>
    </div>
    <div class="timer">
      <div class="countdown" id="countdown4_sec"></div>
    </div>
  </div>
  <div class="timer-column">
    <h2 class="title3">تابستان بعدی</h2>
    <div class="timer">
      <div class="countdown" id="countdown5"></div>
    </div>
    <div class="timer">
      <div class="countdown" id="countdown5_sec"></div>
    </div>
  </div>
  <div class="timer-column">
    <h2 class="title4">کنکور</h2>
    <div class="timer">
      <div class="countdown" id="countdown1"></div>
    </div>
    <div class="timer">
      <div class="countdown" id="countdown1_sec"></div>
    </div>
  </div>
  <div class="timer-column">
    <h2 class="title5">روز مدرسه بعدی</h2>
    <div class="timer">
      <div class="countdown" id="nextSchoolDay"></div>
    </div>
    <div class="timer">
      <div class="countdown" id="nextSchoolDay_sec"></div>
    </div>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
<script>

  var countdownDates = [
    new Date("2025-03-15T00:00:00").getTime(), // عید
    new Date("2025-05-22T00:00:00").getTime(), // امتحانات
    new Date("2025-06-22T00:00:00").getTime(), // تابستان بعدی
    new Date("2026-06-29T10:30:00").getTime()  // کنکور
  ];

  var schoolDays = [6, 0, 1, 2, 3]; // Saturday (6) to Wednesday (3)
  
  // Function to find the next school day at 7:15 a.m.
  function getNextSchoolDay() {
    var now = new Date();
    var day = now.getDay();
    var hour = now.getHours();
    var minute = now.getMinutes();
    var nextDay = null;
    
    if (schoolDays.includes(day) && (hour < 7 || (hour === 7 && minute < 15))) {
      nextDay = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 7, 15, 0); // Today 7:15 a.m.
    } else {
      var daysToAdd = 1;
      while (!nextDay) {
        var testDay = (day + daysToAdd) % 7;
        if (schoolDays.includes(testDay)) {
          nextDay = new Date(now.getFullYear(), now.getMonth(), now.getDate() + daysToAdd, 7, 15, 0);
        }
        daysToAdd++;
      }
    }
    return nextDay.getTime();
  }

  var nextSchoolDay = getNextSchoolDay();

  function startTimers() {
    var x = setInterval(function() {
      var now = new Date().getTime();
      var timers = [
        { id: 'countdown1', end: countdownDates[3] }, // کنکور
        { id: 'countdown2', end: countdownDates[0] }, // عید
        { id: 'countdown4', end: countdownDates[1] }, // امتحانات
        { id: 'countdown5', end: countdownDates[2] }, // تابستان بعدی
        { id: 'nextSchoolDay', end: nextSchoolDay }  // روز مدرسه بعدی
      ];

      for (var i = 0; i < timers.length; i++) {
        var distance = timers[i].end - now;
        var countdownElem = document.getElementById(timers[i].id);
        var countdownElemSec = document.getElementById(timers[i].id + '_sec');

        if (distance < 0) {
          countdownElem.innerHTML = "انقضا";
          countdownElemSec.innerHTML = "";
        } else {
          var days = Math.floor(distance / (1000 * 60 * 60 * 24));
          var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
          var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
          var seconds = Math.floor((distance % (1000 * 60)) / 1000);

          countdownElem.innerHTML = days + " روز " + hours + " ساعت " + minutes + " دقیقه ";
          countdownElemSec.innerHTML = seconds + " ثانیه ";
        }
      }
    }, 1000);
  }

  startTimers();

</script>
</body>
</html>
